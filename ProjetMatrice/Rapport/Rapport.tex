\input{header.tex}
\title{Rapport - Projet Matrice}
\fancyhf{}
\lhead{\leftmark}
\lfoot{COLEAU Victor \& COUCHOUD Thomas}
\rfoot{Page~\thepage}

\begin{document}
	\maketitle
	\tableofcontents
	\chapter{Présentation du sujet}
		L'objectif de ce projet est de réaliser une librairie de classes et de fonctions permettant de manipuler des matrices.
	
	\chapter{Architecture}
		\img{diagramClass.png}{Diagramme de classes}{0.42}
		La classe centrale de notre projet est CMatrix. Celle-ci représente une matrice. Y sont stockées les informations suivantes:
		\begin{itemize}
			\item La hauteur représentant le nombre de lignes de la matrice.
			\item La largeur représentant le nombre de colonnes de la matrice.
			\item Un tableau 2D contenant l'ensemble des valeurs de la matrice.\\
		\end{itemize}
		De plus, cette classe contient l'ensemble des méthodes demandées telles que :
		\begin{itemize}
			\item L'opérateur d'addition avec une deuxième matrice en renvoyant une nouvelle.
			\item L'opérateur dde soustraction avec une deuxième matrice en renvoyant une nouvelle.
			\item L'opérateur de multiplication par un scalaire (à droite et à gauche) renvoyant une nouvelle matrice.
			\item L'opérateur de division par un scalaire renvoyant une nouvelle matrice.
			\item L'opérateur de multiplication par une autre matrice en renvoyant une nouvelle.
			\item L'affichage d'une matrice dans la console.
			\item Le calcul et la création de la transposée d'une matrice sans changer l'originale.
			\item L'opérateur d'affection copiant le contenu d'une matrice dans une autre.
			\item L'opérateur de comparaison.
			\item Les opérateurs *= et /= avec un scalaire ou une matrice. Ceux-ci modifient la matrice en cours.
			\item L'opérateur parenthèse prennant deux paramètres et renvoyant la valeur contenue dans la case demandée.\\
		\end{itemize}
		
		Nous avons ensuite fait hériter à cette classe une autre classe appelée CSquareMatrix représentant elle aussi une matrice mais carrée. Celle-ci contient les mêmes informations que sa classe mère mais propose des méthodes supplémentaires spécifiques aux calculs mathématiques réservés aux matrices carrées:
		\begin{itemize}
			\item Calcul du déterminant.
			\item Calcul de l'inverse.
			\item Calcul de la comatrice.
			\item Calcul des puissances d'une matrice.\\
		\end{itemize}
		
		Afin de pouvoir lire des matrices externes au programme, nous avons implémenté une classe statique CMatrixParser. Cette dernière lira un fichier texte du format indiqué et renverra au choix, une matrice ou une matrice carrée. Pour réaliser cela, cette dernière s'appuie sur une énumération et une structure. L'énumération eMatrixType permet de faire la transition entre le type de la matrice écrite dans le fichier et le type du language. La structure sMatrixInfo stocke de manière temporaire les informations de la matrice lues dans le fichier. 
		
	\chapter{Choix de codage}
		Avant tout chose, nous avons prit la décision de créer un fichier nommé "utils.h". Celui-ci contient des macros permettant de compiler sous Visual Studio et un système Unix (utilisation des méthodes propres à chaque compilateur). De plus, il contient un certain nombre de macros utilitaires, notamment MMALLOC et RREALLOC allouant l'espace mémoire demandé tout en vérifiant le bon déroulement.
	
		Le choix de créer une classe CSquareMatrix héritée de CMatrix vient des nombreuses opérations mathématiques propres aux matrices carrées. Nous aurions put implémenter celles-ci directement dans la classe des matrices quelconques mais nous aurions alors du vérifier à chaque appel si la matrice avait le même nombre de lignes et de colonnes et lever une exception en cas d'échec.
		Grâce à ce choix, nous évitons un grand nombre de vérifications sans pour autant géner les calculs normaux puisque des matrices carrées sont aussi des matrices simples et peuvent donc être multipliées, transposées, etc..
		
		
	
		%Parser why sMatrixInfo?
		Dans le parser, nous utilisons une structure SMatrixInfo. Celle-ci contient temporairement les informations d'une matrice. Nous en avons l'utilité lors de la création de nos matrices après lecture. En effet, si nous stockions directement les informations lues dans un objet matrice, nous ne pourions pas faire la différence entre une matrice quelconque et une matrice carrée. Cela est du au fait que l'objet doit être créé avant la lecture mais que nous avons besoin des informations lues pour définir le type d'objet à créer. La structure sert donc à vérifier si une matrice est carrée ou non pour ensuite instancier l'objet approprié.
	
	\chapter{Tests effectués}
		Afin de pouvoir valider le fonctionnement de notre code, nous avons réalisé de nombreux tests. Certains ont été réalisés de manière manuelle mais un bon nombre d'entre eux ont été écrits sous forme de "test unitaires". Ceux-ci sont présents dans les fichiers CXXXTest.cpp qui vont respectivement tester leurs classes XXX.
		
		Nous sommes conscients que les tests sont très minimalistes et ne couvrent pas tout, cependant cela est déjà un bon départ pour vérifier un fonctionnement "normal".
		
		Commençons par CExceptionUnit:
		\begin{itemize}
			\item Tests des différents constructeur impliquant l'ID de l'exception ainsi que les getters et setters de celui-ci.
			\item Tests des différents constructeur impliquant le message de l'exception ainsi que les getters et setters de celui-ci.
		\end{itemize}
		Ceux-si sont très généralistes mais couvre relativement bien les différentes utilisations d'un objet de cette classe.
		
		Intéressons nous maintenant à CMatrixUnit:
		\begin{itemize}
			\item Test des différents constructeurs ainsi que les getters concernant le nombre de lignes et le nombre de colonnes.
			\item Tests des getters et setters sur les valeurs de la matrice.
			\item Tests des différentes opérations:
			\item 
			\begin{itemize}
				\item Transposée d'une matrice.
				\item Multiplication par une coefficient.
				\item Division par un coefficient.
				\item Division par le coefficient 0 renvoyant une exception.
				\item Test d'égalité de matrices.
				\item Test d'affectation de matrices.
				\item Test de l'opérateur $\left(\right])$
				\item Test de l'opérateur $\left(\right])$ avec coordonnées invalides renvoyant une exception.
				\item Test de la somme de deux matrices.
				\item Test de la sous traction de deux matrices.
				\item Test du produit de deux matrices.
				\item Test du produit de deux matrices incompatibles renvoyant une exception.
				\item Test de l'opérateur *= avec un coefficient.
				\item Test de l'opérateur *= avec une matrice.
				\item Test de l'opérateur *= avec une matrice incompatible renvoyant une exception.
				\item Test de l'opérateur /= avec un coefficient.
				\item Test de l'opérateur /= avec un coefficient 0 renvoyant une exception.
			\end{itemize}
		\end{itemize}
		
		Ces tests nous semblent assez complet sur les matrices. Cependant chaque test n'est effectué qu'une seule fois ce qui peut remettre en doute l'efficacité du test.
		
		Passons ensuite aux tests contenus dans CSquareMatrixUnit:
		\begin{itemize}
			\item Test des différents constructeurs ainsi que les getters concernant la dimension de la matrice.
			\item Tests des getters et setters sur les valeurs de la matrice.
			\item Tests des différentes opérations:
			\item 
			\begin{itemize}
				\item Test du calcul du déterminant.
				\item Test du calcul d'une comatrice.
				\item Test du calcul d'une matrice inverse.
				\item Test du calcul d'une matrice inverse avec déterminant nul, renvoyant une exception.
				\item Calcul de la puissance d'une matrice.
			\end{itemize}
		\end{itemize}
		
		Enfin les derniers tests sont effectués dans CMatrixParserUnit:
		\begin{itemize}
			\item Test de la lecture d'un fichier.
			\item Test de la lecture d'un ficher avec un type non supporté.
			\item Test de la lecture d'un fichier en tant que matrice carrée.
			\item Test de la lecture d'un fichier en tant que matrice carrée avec une matrice non carrée, renvoyant une exception.
		\end{itemize}
	
	\chapter{Conseils d'utilisation}

\end{document}
